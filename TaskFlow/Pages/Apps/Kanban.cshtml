@page
@model AspnetCoreFull.Pages.Apps.KanbanModel
@{
    ViewData["Title"] = "Kanban Board";
}

@Html.AntiForgeryToken()

@section VendorStyles {
    <link rel="stylesheet" href="~/vendor/libs/jkanban/jkanban.dist.css" />
    <link rel="stylesheet" href="~/vendor/libs/select2/select2.dist.css" />
    <link rel="stylesheet" href="~/vendor/libs/flatpickr/flatpickr.dist.css" />
    <link rel="stylesheet" href="~/vendor/libs/quill/typography.dist.css" />
    <link rel="stylesheet" href="~/vendor/libs/quill/katex.dist.css" />
    <link rel="stylesheet" href="~/vendor/libs/quill/editor.dist.css" />
}

@section VendorScripts {
    <script src="~/vendor/libs/moment/moment.dist.js"></script>
    <script src="~/vendor/libs/flatpickr/flatpickr.dist.js"></script>
    <script src="~/vendor/libs/select2/select2.dist.js"></script>
    <script src="~/vendor/libs/jkanban/jkanban.dist.js"></script>
    <script src="~/vendor/libs/quill/katex.dist.js"></script>
    <script src="~/vendor/libs/quill/quill.dist.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
}

@section PageStyles {
    <link rel="stylesheet" href="~/vendor/css/pages/app-kanban.dist.css" />
}

@section PageScripts {
    <script>
        const kanbanData = @Html.Raw(Model.KanbanData);
        const userData = @Html.Raw(Model.UsersData);
        console.log('Datos recibidos del servidor:', kanbanData);
        console.log('Usuarios recibidos:', userData);
    </script>
    <script src="~/js/app-kanban.dist.js"></script>
}

<div class="app-kanban">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0">Tablero Kanban</h4>
        <button type="button" class="btn btn-primary" onclick="showCreateWorkItemModal()">
            <i class="ti ti-plus me-1"></i>Crear Tarea
        </button>
    </div>
    <div class="kanban-wrapper" style="min-height: 700px; padding: 20px;"></div>
</div>

<style>
    .kanban-board {
        min-height: 600px;
        max-height: 800px;
        overflow-y: auto;
    }

    .kanban-drag {
        min-height: 500px;
    }

    .kanban-item {
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        border-radius: 8px;
        padding: 15px;
    }
</style>
